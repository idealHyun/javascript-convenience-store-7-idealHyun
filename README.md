# 가상 편의점 - javascript-convenience-store-precourse

### 설명

이 프로그램은 가상의 편의점에서 **결제 및 재고 관리**를 수행합니다.

- **재고 출력**
    - 편의점의 **물품**들과 **수량**, 진행중인 **프로모션 이름**을 출력합니다.

- **프로모션 혜택 및 재고 확인**
    - 사용자가 입력한 **상품명**과 **수량**을 바탕으로, 프로모션 혜택과 재고 상황을 검토합니다.
    - 재고가 부족할 경우 **정가 결제 안내**를 제공합니다.

- **결제 선택**
    - 사용자는 안내를 바탕으로 **정가 결제 여부**를 선택할 수 있습니다.

- **총 금액 및 멤버십 할인**
    - 선택된 구매 내역을 기반으로 **총 구매 금액**이 계산됩니다.
    - 사용자는 **멤버십 할인 여부**를 선택할 수 있습니다.
    - 멤버십 할인은 **정가 결제 상품**에 대해 **최대 8,000원**까지 **30% 할인**이 적용됩니다.

- **영수증 출력 및 추가 구매 옵션**
    - **구매 내역**, **증정 내역**이 영수증으로 출력됩니다.
    - **총 구매 금액**과 **행사 할인 금액**, **멤버십 할인 금액**, **최종으로 낼 금액**에 대해 출력합니다.
    - 고객은 **추가 구매** 또는 **결제 종료**를 선택할 수 있습니다.


---

### 프로그램 설치 및 실행

```bash
# 위 프로그램를 로컬로 클론합니다.
git clone https://github.com/idealHyun/javascript-convenience-store-7-idealHyun.git

# 필요한 패키지를 설치합니다.
npm install

# 프로그램을 실행합니다.
npm run start
```

<br>

---

### 사용 방법

1. 출력된 편의점 재고 상황을 보고 구매하고 싶은 상품의 이름과 수량을 입력합니다.(EX: [콜라-2])
2. 구매하고 싶은 상품에 대해 프로모션의 혜택을 받지 못해서 정가 결제를 해야하거나 프로모션의 혜택을 받을 경우에 대해서는 메세지를 출력하여 사용자에게 `Y`/`N` 을 통해 입력을 받고 처리합니다.
3. 멤버십 할인에 대해 `Y`/`N` 을 통해 입력을 받고 처리합니다.
4. 구매한 물건에 대해 영수증을 출력합니다.
5. 추가 구매 여부에 대해 `Y`/`N` 을 통해 입력을 받고 추가 구매시 업데이트된 재고 상황을 보여주고 추가 구매를 원하지 않을 경우 프로그램이 종료됩니다.

<br>

---

### 사용 예시

```bash
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 5개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-3],[에너지바-2],[컵라면-2]

현재 컵라면 2개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
Y
                                                                                                                                                                                                         
멤버십 할인을 받으시겠습니까? (Y/N)
Y
==============W 편의점=================
상품명                  수량    금액
콜라                     3       3,000
컵라면                   2       3,400
에너지바                 2       4,000
=============증         정=============
콜라                     1
=======================================
총구매액                 7       10,400
행사할인                        -1,000
멤버십할인                      -2,220
내실돈                          7,180

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 7개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 3개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 재고 없음 MD추천상품
- 컵라면 1,700원 9개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-6]
                                                                                                                                                                                                         
멤버십 할인을 받으시겠습니까? (Y/N)
Y
==============W 편의점=================
상품명                  수량    금액
콜라                     6       6,000
=============증         정=============
콜라                     2
=======================================
총구매액                 6       6,000
행사할인                        -2,000
멤버십할인                      -0
내실돈                          4,000

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 1개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 3개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 재고 없음 MD추천상품
- 컵라면 1,700원 9개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[탄산수-2]

현재 탄산수은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
Y

멤버십 할인을 받으시겠습니까? (Y/N)
Y
==============W 편의점=================
상품명                  수량    금액
탄산수                   3       3,600
=============증         정=============
탄산수                   1
=======================================
총구매액                 3       3,600
행사할인                        -1,200
멤버십할인                      -0
내실돈                          2,400

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
N
```

<br>

---

### 프로젝트 폴더 구조
```markdown
├── App.js
├── index.js
│
├── constants
│   ├── docsConfig.js
│   ├── message.js
│   └── storeConfig.js
│
├── controllers
│   └── ConvenienceStoreController.js
│
├── dtos
│   ├── BonusProductDTO.js
│   ├── ProductInfoDTO.js
│   ├── ProductPromotionInfoDTO.js
│   ├── PurchasedProductDTO.js
│   ├── ReceiptDTO.js
│   └── TotalInfoDTO.js
│
├── models
│   ├── ConvenienceStore.js
│   ├── DocsLoader.js
│   ├── Parser.js
│   ├── Product.js
│   ├── ProductStock.js
│   ├── Promotion.js
│   ├── PromotionProductStock.js
│   └── Receipt.js
│
└── views
    ├── InputView.js
    └── OutputView.js

```

<br>

---

### 기능 순서

- 환영인사와 상품명, 가격, 프로모션 이름, 재고를 안내하기
    - 재고가 없다면 `재고 없음`을 출력
- 구매할 상품과 수량을 입력 받기
    - 입력 방식은 [물품-수량]
    - 여러개를 살 경우 쉼표(`,`)로 구분하기
- 구매 상품이 프로모션이 있는지 확인하기
    - 프로모션이 있는 경우
        - 오늘 날짜가 프로모션 날짜에 포함되는지 확인
        - 프로모션을 계산하여 재고가 있는 지 확인
        - 프로모션 적용이 가능한 경우
            - 고객이 적게 가져온 경우 메세지를 출력하고 추가 여부에 대한 입력받기
                - `Y` : 상품을 추가
                - `N` : 상품을 추가하지 않음
        - 프로모션 재고가 충분하지 않은 경우
            - 할인이 적용되지 않는 개수를 구하기
            - 할인이 적용되지 않는 메세지를 출력하고 구매 여부에 대한 입력받기
                - `Y` : 해당 개수들을 재고에서 제거
                - `N` : 해당 개수의 상품들을 예비구매내역에서 제거
    - 프로모션이 없는 경우
- 멤버실 할인 여부 입력 받기
    - `Y` : 멤버십 할인하기
        - 프로모션이 적용되지 않는 물건에 대한 금액 구하기
        - `30%` 할인하기
        - 할인 금액은 `최대 8000원`까지만 가능
    - `N` : 결제하기
- 결제하기
    - 상품을 각 재고에서 수량 감소시키기
- 영수증 출력
    - `상품명`과 `수량` `금액` 출력하기
    - 증정 상품이 있다면 `상품명`과 `수량` 출력하기
    - `총 구매액` 출력하기
    - `프로모션에 의해 할인된 금액` 출력하기
    - `멤버십에 의해 할인된 금액` 출력하기
    - `최종 결제 금액` 출력하기
- 추가 구매 여부를 입력 받기
    - `Y` : 환영인사와 상품명, 가격, 프로모션 이름, 재고를 안내하기
    - `N` : 프로그램 종료

---

### 기능 명세

- Product
    - 물건의 이름(name)과 가격(price)을 가진다.
    - 가격은 양의 정수이어야한다.
    - 이름은 문자열이다.
    - 이름과 가격은 필수 값이다.
- ProductStock
    - 물건의 이름(productName)과 수량(quantity)을 가진다.
    - 프로모션에 대한 정보는 없다.
    - 수량은 양의 정수이어야한다.
    - 물건의 이름은 문자열이다.
    - 물건의 이름과 수량은 필수 값이다.
- PromotionProductStock
  - ProductStock 에서 프로모션 이름(promotionName)이 추가되었다.
  - 프로모션의 이름은 문자열이다.
  - 물건의 이름, 수량, 프로모션의 이름은 필수 값이다.
  - 동일 상품에는 한가지의 프로모션만 존재할 수 있다.
  - 동일 이름의 물건이라면 프로모션이 있는 재고먼저 차감이 되어야한다.
  - 프로모션 재고가 부족하면 일반 물건에서 차감해야한다.
- Promotion
  - 프로모션의 이름(name), 구매개수(buy), 받는 개수(get), 시작 날짜(startDate), 끝나는 날짜(endDate)를 가진다.
  - buy 와 get 은 최소 개수를 가진다.
  - 시작 날짜가 끝나는 날짜보다 뒤에 일수는 없다.
  - 프로모션 날짜에 속하지 않으면 재고에 대해 출력하지 않는다.
- ConvenienceStore
  - 각 물건에 대해 가격과 재고 정보를 가지고 있어야한다.
  - 프로모션에 대한 정보를 가지고 있어야한다.
  - 각 물건이나 프로모션에 대해 정보를 비교할 수 있어야한다.
  - 재고 계산이 되어야한다.
  - 구매 관련 기록을 가지고 있어야한다.
- Receipt
  - 프로모션이 적용되어 구매되는 물건들에 대한 정보를 가져야한다.
  - 프로모션이 미적용되어 구매되는 물건들에 대한 정보를 가져야한다.
  - 증정되는 물건들에 대한 정보를 가져야한다.
  - 각 물건에 대한 정보에는 물건의 이름, 가격, 수량에 대해 정보를 가지고 있어야한다.
  - 프로모션이 적용되지 않고 구매되는 것들은 모두 미적용 구매 상품에 포함시킨다.
  - 사용자가 추가 증정을 받지 않은 경우 프로모션 미적용 구매 상품에 포함시킨다.